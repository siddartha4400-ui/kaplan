import{r as n,q as y,j as o}from"./app-Crv3_633.js";function p({value:e,onChange:c,height:l=300}){const u=n.useRef(null),{url:m}=y(),[i]=n.useState(()=>`editor-${Math.random().toString(36).substring(2,9)}`),[s,r]=n.useState(!1),[d,f]=n.useState(!1);n.useEffect(()=>{if(window.tinymceLoaded)r(!0);else{const t=document.createElement("script");t.src="/tinymce/js/tinymce/tinymce.min.js",t.referrerPolicy="origin",t.onload=()=>{window.tinymceLoaded=!0,r(!0)},document.body.appendChild(t)}},[]),n.useEffect(()=>(s&&g(),()=>{if(window.tinymce){const t=window.tinymce.get(i);t&&t.destroy()}}),[s,m]),n.useEffect(()=>{if(d&&window.tinymce){const t=window.tinymce.get(i);t&&t.getContent()!==e&&(console.log("Setting content in editor:",e),t.setContent(e||""))}},[e,d]);const g=()=>{window.tinymce&&window.tinymce.init({selector:`#${i}`,skin_url:"/tinymce/js/tinymce/skins/ui/oxide",content_css:"/tinymce/js/tinymce/skins/content/default/content.css",plugins:"advlist autolink lists link image charmap preview anchor searchreplace visualblocks code fullscreen table media emoticons code help wordcount",toolbar:"undo redo | formatselect | bold italic underline | alignleft aligncenter alignright alignjustify | outdent indent | numlist bullist | link image | table | media | emoticons | code | fullscreen | preview",toolbar_mode:"floating",menubar:!0,statusbar:!0,height:l,branding:!1,paste_data_images:!0,content_style:"body { font-family: Arial, sans-serif; font-size: 14px; }",image_advtab:!0,setup:t=>{u.current=t,t.on("init",()=>{console.log("Editor initialized with value:",e),e&&t.setContent(e),f(!0)}),t.on("keyup change",()=>{const a=t.getContent();console.log("Editor content changed:",a),c&&c(a)})}})};return o.jsx(o.Fragment,{children:s?o.jsx("textarea",{id:i}):o.jsx("p",{children:"Loading editor..."})})}export{p as E};
