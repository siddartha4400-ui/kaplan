import{j as e,J as h,r as d}from"./app-CuAWbn3K.js";import{u as b}from"./useQueryParams-DFCxT9ka.js";import{m as j,n as p}from"./apiEndpoints-ooPQ9U6Q.js";import{d as g}from"./index-CFDgAmWI.js";const f=({tableName:n,tableData:c,openRow:l,toggleAccordion:i,handleEdit:o,handleDelete:r})=>e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-3",children:n?`Table: ${n}`:"Table: --"}),e.jsx("div",{className:"space-y-3",children:c.length>0?c.map(s=>e.jsxs("div",{className:"border border-gray-300 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-gray-200 cursor-pointer",onClick:()=>i(s.id),children:[e.jsx("span",{className:"font-semibold",children:Object.values(s).slice(0,2).join(" - ")}),e.jsx("span",{children:l===s.id?"▲":"▼"})]}),l===s.id&&e.jsxs("div",{className:"p-4 bg-gray-100 border-t border-gray-300",children:[e.jsx("pre",{className:"p-2 bg-white border rounded",children:JSON.stringify(s,null,2)}),e.jsxs("div",{className:"mt-3",children:[e.jsx("button",{className:"mr-2 bg-blue-500 text-white px-3 py-1 rounded",children:e.jsx(h,{href:s.edit,preserveState:!0,children:"Edit"})}),e.jsx("button",{className:"bg-red-500 text-white px-3 py-1 rounded",onClick:()=>r(s.id),children:"Delete"})]})]})]},s.id)):e.jsx("p",{className:"text-center text-gray-500",children:"No Data"})})]}),N=()=>{const{getQueryParam:n}=b(),[c,l]=d.useState([]),[i,o]=d.useState(null),r=n("table")||null;d.useEffect(()=>{window.apiRequest(`${j(r)}`).then(t=>{if(t!=null&&t.success){const a=t.data;l(a??[])}else console.warn("Unexpected response:",t)}).catch(t=>{console.error("Error fetching journal:",t)})},[r]);const s=t=>{o(i===t?null:t)},u=t=>{g.Inertia.visit(`/journal-form?edit=${t.id}`)},m=t=>{window.apiRequest(`${p(r,t)}`).then(a=>{if(a!=null&&a.success){const x=a.data;l(x??[])}else console.warn("Unexpected response:",a)}).catch(a=>{console.error("Error fetching journal:",a)})};return e.jsx(f,{tableName:r,tableData:c,openRow:i,toggleAccordion:s,handleEdit:u,handleDelete:m})},D=()=>e.jsx(N,{});export{D as default};
