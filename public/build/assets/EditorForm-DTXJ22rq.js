import{j as e,r as d}from"./app-BsIyBwAH.js";import{S as p}from"./react-select.esm-CDYNRxZV.js";import{h as j,u as N}from"./helper-B46hJv02.js";import{u as g}from"./useQueryParams-B-tQ2ebL.js";import{b as y,d as v}from"./apiEndpoints-BBmwTD_r.js";import{d as w}from"./index-CDSytWfv.js";import"./index-CFbISZw0.js";import"./index-Dz1EcDfV.js";const E=({formData:l,errors:t,handleChange:i,handleFileChange:m,handleSelectChange:n,handleSubmit:o,isSubmitting:r,editorOptions:c})=>e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Researcher Profile Form"}),e.jsxs("form",{onSubmit:o,children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-1/2 space-y-4 pr-6 border-r border-gray-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Name:"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:i,className:"w-full p-2 border rounded"}),t.name&&e.jsx("p",{className:"text-red-500",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Country:"}),e.jsx("input",{type:"text",name:"country",value:l.country,onChange:i,className:"w-full p-2 border rounded"}),t.country&&e.jsx("p",{className:"text-red-500",children:t.country})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Biography:"}),e.jsx("textarea",{name:"biography",value:l.biography,onChange:i,className:"w-full p-2 border rounded",rows:"3"}),t.biography&&e.jsx("p",{className:"text-red-500",children:t.biography})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Qualification:"}),e.jsx("input",{type:"text",name:"qualification",value:l.qualification,onChange:i,className:"w-full p-2 border rounded"}),t.qualification&&e.jsx("p",{className:"text-red-500",children:t.qualification})]})]}),e.jsxs("div",{className:"w-1/2 space-y-4 pl-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Research Interests:"}),e.jsx("textarea",{name:"researchInterests",value:l.researchInterests,onChange:i,className:"w-full p-2 border rounded",rows:"3"}),t.researchInterests&&e.jsx("p",{className:"text-red-500",children:t.researchInterests})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Affiliation:"}),e.jsx("input",{type:"text",name:"affiliation",value:l.affiliation,onChange:i,className:"w-full p-2 border rounded"}),t.affiliation&&e.jsx("p",{className:"text-red-500",children:t.affiliation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Role:"}),e.jsx(p,{options:c,value:l.chiefEditor,onChange:n,className:"w-full border p-2"}),t.chiefEditor&&e.jsx("p",{className:"text-red-500",children:t.chiefEditor})]})]})]}),e.jsx("div",{className:"my-6 border-t border-gray-300"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-60 text-center border p-4 rounded-lg shadow-md",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Profile Photo:"}),e.jsx("div",{className:"w-40 h-40 mx-auto mb-2 border rounded-full overflow-hidden",children:l.photo?e.jsx("img",{src:l.photo.filePath,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:"No Image"})}),e.jsx("input",{type:"file",name:"photo",accept:"image/*",onChange:m,className:"w-full p-2 border rounded"}),t.photo&&e.jsx("p",{className:"text-red-500",children:t.photo})]})}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white p-2 rounded mt-6 hover:bg-blue-600 disabled:bg-gray-400",disabled:r,children:r?"Submitting...":"Submit"})]})]}),S=()=>{const{getQueryParam:l}=g(),[t,i]=d.useState({name:"",country:"",qualification:"",biography:"",researchInterests:"",affiliation:"",chiefEditor:null,photo:null,edit:isNaN(Number(l("edit")))?null:Number(l("edit"))}),[m,n]=d.useState(!1),[o,r]=d.useState({}),c=[{value:1,label:"Editor in Chief"},{value:2,label:"Editor"},{value:3,label:"Associate Editor"}],h=s=>{const{name:a,value:u}=s.target;i({...t,[a]:u}),r({...o,[a]:""})},f=async s=>{try{const a=await j(s,N);i({...t,photo:a}),r({...o,photo:""})}catch(a){console.error("Upload failed:",a.message)}},x=s=>{i({...t,chiefEditor:s}),r({...o,chiefEditor:""})},b=async s=>{s.preventDefault(),n(!0);try{const a=await window.apiRequest(v,"POST",t);if(a!=null&&a.success)return w.Inertia.visit("/table?table=editors");console.warn("Unexpected response:",a)}catch(a){console.error("Error submitting form:",a)}finally{n(!1)}};return d.useEffect(()=>{t.edit&&window.apiRequest(`${y}/${t.edit}`).then(s=>{if(s!=null&&s.success){const a=s.data;i({...t,name:a.name,country:a.country,qualification:a.qualification,biography:a.biography,researchInterests:a.researchInterests,affiliation:a.affiliation,chiefEditor:c.find(u=>u.value===Number(a.chiefEditor)),photo:a.photo})}else console.warn("Unexpected response:",s),alert("Something went wrong!")}).catch(s=>{console.error("Error fetching journal:",s)})},[]),e.jsx(E,{formData:t,errors:o,handleChange:h,handleFileChange:f,handleSelectChange:x,handleSubmit:b,isSubmitting:m,editorOptions:c})},O=()=>e.jsx(S,{});export{O as default};
