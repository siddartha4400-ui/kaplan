import{j as e,$ as m,r as d}from"./app-D--eIwP2.js";import{u as b,k as j,l as p,d as g}from"./useQueryParams-Bih7gm38.js";const f=({tableName:n,tableData:c,openRow:r,toggleAccordion:i,handleEdit:o,handleDelete:l})=>e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-3",children:n?`Table: ${n}`:"Table: --"}),e.jsx("div",{className:"space-y-3",children:c.length>0?c.map(s=>e.jsxs("div",{className:"border border-gray-300 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-gray-200 cursor-pointer",onClick:()=>i(s.id),children:[e.jsx("span",{className:"font-semibold",children:Object.values(s).slice(0,2).join(" - ")}),e.jsx("span",{children:r===s.id?"▲":"▼"})]}),r===s.id&&e.jsxs("div",{className:"p-4 bg-gray-100 border-t border-gray-300",children:[e.jsx("pre",{className:"p-2 bg-white border rounded",children:JSON.stringify(s,null,2)}),e.jsxs("div",{className:"mt-3",children:[e.jsx("button",{className:"mr-2 bg-blue-500 text-white px-3 py-1 rounded",children:e.jsx(m,{href:s.edit,preserveState:!0,children:"Edit"})}),e.jsx("button",{className:"bg-red-500 text-white px-3 py-1 rounded",onClick:()=>l(s.id),children:"Delete"})]})]})]},s.id)):e.jsx("p",{className:"text-center text-gray-500",children:"No Data"})})]}),N=()=>{const{getQueryParam:n}=b(),[c,r]=d.useState([]),[i,o]=d.useState(null),l=n("table")||null;d.useEffect(()=>{window.apiRequest(`${j(l)}`).then(t=>{if(t!=null&&t.success){const a=t.data;r(a??[])}else console.warn("Unexpected response:",t)}).catch(t=>{console.error("Error fetching journal:",t)})},[l]);const s=t=>{o(i===t?null:t)},u=t=>{g.Inertia.visit(`/journal-form?edit=${t.id}`)},x=t=>{window.apiRequest(`${p(l,t)}`).then(a=>{if(a!=null&&a.success){const h=a.data;r(h??[])}else console.warn("Unexpected response:",a)}).catch(a=>{console.error("Error fetching journal:",a)})};return e.jsx(f,{tableName:l,tableData:c,openRow:i,toggleAccordion:s,handleEdit:u,handleDelete:x})},E=()=>e.jsx(N,{});export{E as default};
