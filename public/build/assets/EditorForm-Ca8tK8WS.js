import{j as e,r as d}from"./app-DuKJyHO7.js";import{S as p,h as j,u as N}from"./helper-CkBnDhP5.js";import{u as g,b as y,e as v,d as w}from"./useQueryParams-D4Wy2uIi.js";import"./index-BR8sq8Sj.js";const E=({formData:l,errors:a,handleChange:i,handleFileChange:u,handleSelectChange:n,handleSubmit:o,isSubmitting:r,editorOptions:c})=>e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Researcher Profile Form"}),e.jsxs("form",{onSubmit:o,children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-1/2 space-y-4 pr-6 border-r border-gray-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Name:"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:i,className:"w-full p-2 border rounded"}),a.name&&e.jsx("p",{className:"text-red-500",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Country:"}),e.jsx("input",{type:"text",name:"country",value:l.country,onChange:i,className:"w-full p-2 border rounded"}),a.country&&e.jsx("p",{className:"text-red-500",children:a.country})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Biography:"}),e.jsx("textarea",{name:"biography",value:l.biography,onChange:i,className:"w-full p-2 border rounded",rows:"3"}),a.biography&&e.jsx("p",{className:"text-red-500",children:a.biography})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Qualification:"}),e.jsx("input",{type:"text",name:"qualification",value:l.qualification,onChange:i,className:"w-full p-2 border rounded"}),a.qualification&&e.jsx("p",{className:"text-red-500",children:a.qualification})]})]}),e.jsxs("div",{className:"w-1/2 space-y-4 pl-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Research Interests:"}),e.jsx("textarea",{name:"researchInterests",value:l.researchInterests,onChange:i,className:"w-full p-2 border rounded",rows:"3"}),a.researchInterests&&e.jsx("p",{className:"text-red-500",children:a.researchInterests})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Affiliation:"}),e.jsx("input",{type:"text",name:"affiliation",value:l.affiliation,onChange:i,className:"w-full p-2 border rounded"}),a.affiliation&&e.jsx("p",{className:"text-red-500",children:a.affiliation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Role:"}),e.jsx(p,{options:c,value:l.chiefEditor,onChange:n,className:"w-full border p-2"}),a.chiefEditor&&e.jsx("p",{className:"text-red-500",children:a.chiefEditor})]})]})]}),e.jsx("div",{className:"my-6 border-t border-gray-300"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-60 text-center border p-4 rounded-lg shadow-md",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Profile Photo:"}),e.jsx("div",{className:"w-40 h-40 mx-auto mb-2 border rounded-full overflow-hidden",children:l.photo?e.jsx("img",{src:l.photo.filePath,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:"No Image"})}),e.jsx("input",{type:"file",name:"photo",accept:"image/*",onChange:u,className:"w-full p-2 border rounded"}),a.photo&&e.jsx("p",{className:"text-red-500",children:a.photo})]})}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white p-2 rounded mt-6 hover:bg-blue-600 disabled:bg-gray-400",disabled:r,children:r?"Submitting...":"Submit"})]})]}),S=()=>{const{getQueryParam:l}=g(),[a,i]=d.useState({name:"",country:"",qualification:"",biography:"",researchInterests:"",affiliation:"",chiefEditor:null,photo:null,edit:isNaN(Number(l("edit")))?null:Number(l("edit"))}),[u,n]=d.useState(!1),[o,r]=d.useState({}),c=[{value:1,label:"Editor in Chief"},{value:2,label:"Editor"},{value:3,label:"Associate Editor"}],h=s=>{const{name:t,value:m}=s.target;i({...a,[t]:m}),r({...o,[t]:""})},x=async s=>{try{const t=await j(s,N);i({...a,photo:t}),r({...o,photo:""})}catch(t){console.error("Upload failed:",t.message)}},f=s=>{i({...a,chiefEditor:s}),r({...o,chiefEditor:""})},b=async s=>{s.preventDefault(),n(!0);try{const t=await window.apiRequest(v,"POST",a);if(t!=null&&t.success)return w.Inertia.visit("/table?table=editors");console.warn("Unexpected response:",t)}catch(t){console.error("Error submitting form:",t)}finally{n(!1)}};return d.useEffect(()=>{a.edit&&window.apiRequest(`${y}/${a.edit}`).then(s=>{if(s!=null&&s.success){const t=s.data;i({...a,name:t.name,country:t.country,qualification:t.qualification,biography:t.biography,researchInterests:t.researchInterests,affiliation:t.affiliation,chiefEditor:c.find(m=>m.value===Number(t.chiefEditor)),photo:t.photo})}else console.warn("Unexpected response:",s),alert("Something went wrong!")}).catch(s=>{console.error("Error fetching journal:",s)})},[]),e.jsx(E,{formData:a,errors:o,handleChange:h,handleFileChange:x,handleSelectChange:f,handleSubmit:b,isSubmitting:u,editorOptions:c})},F=()=>e.jsx(S,{});export{F as default};
